
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Router API Documentation · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../cookie_management/cookie_management.html" />
    
    
    <link rel="prev" href="../middleware/middleware.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introducción
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                    NodeJs
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../Alberto/nodejs/queesnodejs.html">
            
                <a href="../Alberto/nodejs/queesnodejs.html">
            
                    
                    ¿Qué es NodeJs?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../Alberto/nodejs/instalacionnodejs.html">
            
                <a href="../Alberto/nodejs/instalacionnodejs.html">
            
                    
                    Instalación NodeJs
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    Git
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../Alberto/git/queesgit.html">
            
                <a href="../Alberto/git/queesgit.html">
            
                    
                    ¿Qué es Git?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../Alberto/git/instalaciongit.html">
            
                <a href="../Alberto/git/instalaciongit.html">
            
                    
                    Instalación Git
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
                <span>
            
                    
                    Github
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../Alberto/github/queesgithub.html">
            
                <a href="../Alberto/github/queesgithub.html">
            
                    
                    ¿Qué es Github?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../Alberto/github/githubdesktop.html">
            
                <a href="../Alberto/github/githubdesktop.html">
            
                    
                    Github Desktop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../Alberto/github/hub.html">
            
                <a href="../Alberto/github/hub.html">
            
                    
                    Hub
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" >
            
                <span>
            
                    
                    Gitbook
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../Alberto/gitbook/queesgitbook.html">
            
                <a href="../Alberto/gitbook/queesgitbook.html">
            
                    
                    ¿Qué es Gitbook?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../Alberto/gitbook/creaciongitbook.html">
            
                <a href="../Alberto/gitbook/creaciongitbook.html">
            
                    
                    Creación de un gitbook
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" >
            
                <span>
            
                    
                    Gh-pages
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../Alberto/ghpages/queesghpages.html">
            
                <a href="../Alberto/ghpages/queesghpages.html">
            
                    
                    ¿Qué es Gh-pages?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../Alberto/ghpages/creacionghpages.html">
            
                <a href="../Alberto/ghpages/creacionghpages.html">
            
                    
                    Creación de una gh-page
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../Alberto/ghpages/moduloghpages.html">
            
                <a href="../Alberto/ghpages/moduloghpages.html">
            
                    
                    Módulo gh-pages
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" >
            
                <span>
            
                    
                    Markdown
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../Diego/Markdown/queesmarkdown.html">
            
                <a href="../Diego/Markdown/queesmarkdown.html">
            
                    
                    ¿Qué es Markdown?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../Diego/Markdown/sintaxis.html">
            
                <a href="../Diego/Markdown/sintaxis.html">
            
                    
                    Sintaxis de Markdown
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" >
            
                <span>
            
                    
                    Pandoc
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../Diego/Pandoc/queespandoc.html">
            
                <a href="../Diego/Pandoc/queespandoc.html">
            
                    
                    ¿Qué es Pandoc?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../Diego/Pandoc/instalacionpandocenwindows.html">
            
                <a href="../Diego/Pandoc/instalacionpandocenwindows.html">
            
                    
                    Instalacion de Pandoc en Windows
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="../Diego/Pandoc/instalaciondepandocenubuntu.html">
            
                <a href="../Diego/Pandoc/instalaciondepandocenubuntu.html">
            
                    
                    Instalacion de Pandoc en Ubuntu
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" >
            
                <span>
            
                    
                    Atom
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="../Diego/Atom/queesatom.html">
            
                <a href="../Diego/Atom/queesatom.html">
            
                    
                    ¿Qué es Atom?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="../Diego/Atom/instalaratomenwindows.html">
            
                <a href="../Diego/Atom/instalaratomenwindows.html">
            
                    
                    Instalación de Atom en Windows
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="../Diego/Atom/instalaratomenlinux.html">
            
                <a href="../Diego/Atom/instalaratomenlinux.html">
            
                    
                    Instalación de Atom en Linux
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" >
            
                <span>
            
                    
                    Cloud9
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../Diego/C9/queesc9.html">
            
                <a href="../Diego/C9/queesc9.html">
            
                    
                    ¿Qué es Cloud9?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../Diego/C9/instalacionyuso.html">
            
                <a href="../Diego/C9/instalacionyuso.html">
            
                    
                    Instalación y uso de Cloud9
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../inicio/inicio.html">
            
                <a href="../inicio/inicio.html">
            
                    
                    Express
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="../basic-routing/basic-routing.html">
            
                <a href="../basic-routing/basic-routing.html">
            
                    
                    Enrutamiento Básico
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="../routing_guide/direccionamiento.html">
            
                <a href="../routing_guide/direccionamiento.html">
            
                    
                    Routing Guide
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.3" data-path="../middleware/middleware.html">
            
                <a href="../middleware/middleware.html">
            
                    
                    Middleware
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.11.4" data-path="router.html">
            
                <a href="router.html">
            
                    
                    Router API Documentation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.5" data-path="../cookie_management/cookie_management.html">
            
                <a href="../cookie_management/cookie_management.html">
            
                    
                    Cookie Management API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.6" data-path="../cookie_module/cookie_module.html">
            
                <a href="../cookie_module/cookie_module.html">
            
                    
                    Cookie Module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.7" data-path="../http_cookies/httpcookies.html">
            
                <a href="../http_cookies/httpcookies.html">
            
                    
                    Http Cookies
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.8" data-path="../query_string/query_string.html">
            
                <a href="../query_string/query_string.html">
            
                    
                    Query String
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.9" data-path="../session_auth/session_add.html">
            
                <a href="../session_auth/session_add.html">
            
                    
                    Session auth with Express
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.10" data-path="../set_cookie/set_cookie.html">
            
                <a href="../set_cookie/set_cookie.html">
            
                    
                    Set Cookie
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Router API Documentation</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="router-api-documentation">Router API Documentation</h1>
<p>Un objeto router es una instancia aislada de un middleware y ruta. Se puede pensar en ella como una &quot;mini-aplicaci&#xF3;n&quot;, capaz s&#xF3;lo de realizar middleware y funciones de routing. Cada aplicaci&#xF3;n en Express tiene un router app incorporado.</p>
<p>Un router se comporta como un middleware, por lo que puede utilizarse como argumento para app.use() o como argumento para el m&#xE9;todo use() de otro router.</p>
<p>El objeto Express de nivel superior tiene un m&#xE9;todo Router() que crea un nuevo objeto router.</p>
<p>Una vez que haya creado un objeto router, puede agregar middleware y de m&#xE9;todo HTTP (como GET, PUT, POST, etc.) Por ejemplo:</p>
<pre><code>// invoked for any requests passed to this router
router.use(function(req, res, next) {
  // .. some logic here .. like any other middleware
  next();
});

// will handle any request that ends in /events
// depends on where the router is &quot;use()&apos;d&quot;
router.get(&apos;/events&apos;, function(req, res, next) {
  // ..
});
</code></pre><h2 id="m&#xE9;todos">M&#xE9;todos</h2>
<p><strong>router.all(path, [callback, ...] callback)</strong></p>
<p>&#xC9;ste m&#xE9;todo se asemeja a los m&#xE9;todos router.METHOD(), excepto porque coincide con todos los m&#xE9;todos de HTTP.</p>
<p>&#xC9;ste m&#xE9;todo util para el mapping global logico para prefijos, coincidencias arbitrarias o paths. Por ejemplo, si colocas la siguiente ruta en la parte superior del resto de las otras definiciones de rutas, deber&#xED;a requerir una autenticacion para todos las rutas desde ese punto, y automaticamente cargar un usuario.</p>
<p>Las callbacks no tienen que actuar como puntos y aparte; loadUser puede funcionar como una tarea, a continuacion para seguir coincidiendo con las anteriores rutas usar la funci&#xF3;n next().</p>
<p>Hay que fijarse en que las callbacks no tienen que actuar como puntos y aparte; loadUser puede funcionar como una tarea, a continuacion para continuar coincidiendo con las anteriores rutas usar la funcion next().</p>
<pre><code>router.all(&apos;*&apos;, requireAuthentication, loadUser);
</code></pre><p>equivalente a:</p>
<pre><code>router.all(&apos;*&apos;, requireAuthentication);
router.all(&apos;*&apos;, loadUser);
</code></pre><p><strong>router.METHOD(path, [callback, ...] callback)</strong>
Los metodos router.METHOD() proporcionan funcionalidad  routing en Express, METHOD es uno de los metodos HTTP, como GET, PUT, POST escrito en minuscula:<em> router.get(), router.post(), router.put()</em> y otros.</p>
<pre><code>router.get(&apos;/&apos;, function(req, res){
  res.send(&apos;hello world&apos;);
});
</code></pre><pre><code>router.get(/^\/commits\/(\w+)(?:\.\.(\w+))?$/, function(req, res){
  var from = req.params[0];
  var to = req.params[1] || &apos;HEAD&apos;;
  res.send(&apos;commit range &apos; + from + &apos;..&apos; + to);
});
</code></pre><p><strong>router.param(name, callback)</strong></p>
<p>A&#xF1;ade un disparador de callback a un parametro de ruta donde name es el nombre del parametro y callback es la funcion de callback. Name es opcional, pero usar el metodo sin el est&#xE1; en Express desde la v4.11.0.</p>
<p>Los parametros de callback son:</p>
<ul>
<li>req ,el objeto pedido</li>
<li>res ,el objeto de respuesta</li>
<li>next, pr&#xF3;xima funcion middleware</li>
<li>El valor del par&#xE1;metro name</li>
<li>El valor del par&#xE1;metro</li>
</ul>
<pre><code>router.param(&apos;user&apos;, function(req, res, next, id) {

  // try to get the user details from the User model and attach it to the request object
  User.find(id, function(err, user) {
    if (err) {
      next(err);
    } else if (user) {
      req.user = user;
      next();
    } else {
      next(new Error(&apos;failed to load user&apos;));
    }
  });
})
</code></pre><p><strong>router.route(path)</strong>
Devuelve una instancia de una ruta que puede ser usada como manejador de HTTP con middleware. Usa router.route() para no cometer errores de duplicar el nombre de varios routers.</p>
<p>El ejemplo del siguiente nos ense&#xF1;a como usar router.route() para especificar varios manejadores en m&#xE9;todos HTTP.</p>
<pre><code>var router = express.Router();

router.param(&apos;user_id&apos;, function(req, res, next, id) {
  // sample user, would actually fetch from DB, etc...
  req.user = {
    id: id,
    name: &apos;TJ&apos;
  };
  next();
});

router.route(&apos;/users/:user_id&apos;)
.all(function(req, res, next) {
  // runs for all HTTP verbs first
  // think of it as route specific middleware!
  next();
})
.get(function(req, res, next) {
  res.json(req.user);
})
.put(function(req, res, next) {
  // just an example of maybe updating the user
  req.user.name = req.params.name;
  // save user ... etc
  res.json(req.user);
})
.post(function(req, res, next) {
  next(new Error(&apos;not implemented&apos;));
})
.delete(function(req, res, next) {
  next(new Error(&apos;not implemented&apos;));
});
</code></pre><p><strong>router.use([path], [function, ...] function)</strong>
Usa las funciones de middleware especificadas, con la ruta cuyo valor por defecto es &quot;/&quot;.</p>
<p>Este m&#xE9;todo es igual a app.use(). A continuaci&#xF3;n se describe un ejemplo muy simple de uso.</p>
<p>Las solicitudes en un middleware comienzan en la primera funci&#xF3;n de middleware definida y funciona de manera descendente en el procesado de la pila de middleware para cada ruta en la que haya una coincidencia.</p>
<pre><code>var express = require(&apos;express&apos;);
var app = express();
var router = express.Router();

// simple logger for this router&apos;s requests
// all requests to this router will first hit this middleware
router.use(function(req, res, next) {
  console.log(&apos;%s %s %s&apos;, req.method, req.url, req.path);
  next();
});

// this will only be invoked if the path starts with /bar from the mount point
router.use(&apos;/bar&apos;, function(req, res, next) {
  // ... maybe some additional /bar logging ...
  next();
});

// always invoked
router.use(function(req, res, next) {
  res.send(&apos;Hello World&apos;);
});

app.use(&apos;/foo&apos;, router);

app.listen(3000);
</code></pre><p>El orden en el que se define el middleware con router.use() es muy importante, se invocan secuencialmente, el orden define la precedencia de middleware. Por lo general, un logger es el primer middleware que se utilizar&#xED;a, por lo que cada solicitud se registra.</p>
<pre><code>var logger = require(&apos;morgan&apos;);

router.use(logger());
router.use(express.static(__dirname + &apos;/public&apos;));
router.use(function(req, res){
  res.send(&apos;Hello&apos;);
});
</code></pre><p>si se quiere ignorar peticiones de loggin para archivos estaticos, pero continuar haciendo logging de rutas y middleware definidos despues de logger(), se mueve la llamada a express.static() al comienzo, antes de a&#xF1;adir el logger middleware:</p>
<pre><code>router.use(express.static(__dirname + &apos;/public&apos;));
router.use(logger());
router.use(function(req, res){
  res.send(&apos;Hello&apos;);
});
</code></pre><p>Tambien se puede hacer servidor de archivos de m&#xFA;ltiples directorios, dando la precedencia a &quot;./public&quot; frente al resto de rutas:</p>
<pre><code>app.use(express.static(__dirname + &apos;/public&apos;));
app.use(express.static(__dirname + &apos;/files&apos;));
app.use(express.static(__dirname + &apos;/uploads&apos;));
</code></pre>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../middleware/middleware.html" class="navigation navigation-prev " aria-label="Previous page: Middleware">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../cookie_management/cookie_management.html" class="navigation navigation-next " aria-label="Next page: Cookie Management API">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Router API Documentation","level":"1.11.4","depth":2,"next":{"title":"Cookie Management API","level":"1.11.5","depth":2,"path":"cookie_management/cookie_management.md","ref":"cookie_management/cookie_management.md","articles":[]},"previous":{"title":"Middleware","level":"1.11.3","depth":2,"path":"middleware/middleware.md","ref":"middleware/middleware.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"router/router.md","mtime":"2017-03-14T20:09:09.290Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-03-14T20:37:08.710Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

